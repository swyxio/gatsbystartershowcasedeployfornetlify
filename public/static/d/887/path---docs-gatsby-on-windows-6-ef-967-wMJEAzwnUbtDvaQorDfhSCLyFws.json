{"data":{"markdownRemark":{"html":"<h2 id=\"setting-up-your-environment-for-building-native-nodejs-modules\"><a href=\"#setting-up-your-environment-for-building-native-nodejs-modules\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up your environment for building native Node.js modules.</h2>\n<p>Many Gatsby plugins and themes require building native Node.js modules, e.g.\n<a href=\"/packages/gatsby-plugin-sharp/\">Sharp (a common Gatsby dependency used for image processing)</a>.\nTo do so, you need a functional build environment (Python and Visual C++ Build\nTools).</p>\n<p>The easy way to setup your build environment on Windows is to install the\n<a href=\"https://github.com/felixrieseberg/windows-build-tools\"><code class=\"language-text\">windows-build-tools</code></a>\npackage by running <code class=\"language-text\">npm install windows-build-tools -g</code> on an admin PowerShell\nconsole. Upon installing this package, it downloads and installs the Visual C++\nBuild Tools 2015, provided free of charge by Microsoft. These tools are required\nto compile popular native modules. It will also install Python 2.7, configuring\nyour machine and npm appropriately.</p>\n<p>If your <code class=\"language-text\">windows-build-tools</code> installation stalls after Visual Studio Build Tools finishes, <a href=\"https://github.com/felixrieseberg/windows-build-tools/issues/47#issuecomment-296881488\">this remedy</a> might help.</p>\n<h3 id=\"if-code-classlanguage-textnpm-installcode-still-fails\"><a href=\"#if-code-classlanguage-textnpm-installcode-still-fails\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>If <code class=\"language-text\">npm install</code> still fails…</h3>\n<p>Sometimes the <code class=\"language-text\">windows-build-tools</code> won’t properly install the required\nlibraries. This is true if you already have a regular .NET development\nenvironment setup. This has been reported on Windows 10 x64 (and possibly other\narchitectures or Windows versions).</p>\n<p>This might be your problem if, after running <code class=\"language-text\">npm install</code> on a Gatsby site, you\nsee compilation errors such as <code class=\"language-text\">node-gyp</code> or <code class=\"language-text\">sharp</code> or <code class=\"language-text\">binding.gyp not found</code>.</p>\n<p>If you suspect this is your problem, download the\n<a href=\"https://www.visualstudio.com/vs/older-downloads/\">Visual Studio Community 2015 Package</a> (also available from this <a href=\"https://go.microsoft.com/fwlink/?LinkId=532606&#x26;clcid=0x409\">direct download link</a>)\nand install only the part of the package that interests us : <code class=\"language-text\">Programming languages &gt; Visual C++ &gt; Common tools for Visual Studio 2015</code>. Be sure to\ndownload the 2015 version of VS Community, not the 2017 version (see Note 1\nbelow). You can uncheck everything else. You don’t need to install the full\nVS2015 Express on your system and this won’t mess up your existing VS201x\ninstalls.</p>\n<p><img src=\"https://i.stack.imgur.com/J1aet.png\" alt=\"Common tools for Visual Studio 2015 inside the VS 2015 Community Package\"></p>\n<p>Then run the commands on Gatsby:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\">\n      <pre class=\"language-powershell\"><code class=\"language-powershell\">npm uninstall node<span class=\"token operator\">-</span>gyp <span class=\"token operator\">-</span>g\nnpm config <span class=\"token function\">set</span> python python2<span class=\"token punctuation\">.</span>7\nnpm config <span class=\"token function\">set</span> msvs_version 2015\nnpm cache clean <span class=\"token operator\">-</span>f\nnpm install</code></pre>\n      </div>\n<p>You should then be all set.</p>\n<p>If that still doesn’t work, refer to the\n<a href=\"https://www.npmjs.com/package/node-gyp\"><code class=\"language-text\">node-gyp</code> npm package homepage</a> for\nfurther instructions and contact the <code class=\"language-text\">node-gyp</code>team on\n<a href=\"https://github.com/nodejs/node-gyp/issues\">GitHub</a>.</p>\n<p>Note 1 : the Visual Studio Community 2017 surely contains the package too but we\nweren’t able to find it. If you found it, run <code class=\"language-text\">npm config set msvs_version 2017</code>\ninstead and report it here with a screenshot!</p>\n<h2 id=\"gatsby-plugin-sharp-requires-node-x64\"><a href=\"#gatsby-plugin-sharp-requires-node-x64\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-sharp requires Node x64</h2>\n<p>Some plugins which depend on native NPM dependencies require the Node x64 build of Node.js. If you’re struggling to install gatsby-plugin-sharp, try installing Node x64 and removing <code class=\"language-text\">node_modules</code> and running <code class=\"language-text\">npm install</code>.</p>","excerpt":"Setting up your environment for building native Node.js modules. Many Gatsby plugins and themes require building native Node.js modules, e.g…","timeToRead":2,"fields":{"slug":"/docs/gatsby-on-windows/","anchor":"gatsby-on-windows"},"frontmatter":{"title":"Gatsby on Windows"},"parent":{"__typename":"File","relativePath":"docs/gatsby-on-windows.md"}}},"pageContext":{"slug":"/docs/gatsby-on-windows/"}}