{"data":{"markdownRemark":{"html":"<h1 id=\"gatsby-plugin-netlify\"><a href=\"#gatsby-plugin-netlify\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-netlify</h1>\n<p>Automatically generates a <code class=\"language-text\">_headers</code> file and a <code class=\"language-text\">_redirects</code> file at the root of the public folder to configure\n<a href=\"https://www.netlify.com/docs/headers-and-basic-auth/\">HTTP headers</a> and <a href=\"https://www.netlify.com/docs/redirects/\">redirects</a> on Netlify.</p>\n<p>Notably, you can immediately enable HTTP/2 server push of critical Gatsby assets\nthrough the <code class=\"language-text\">Link</code> headers.</p>\n<p>By default, the plugin will add HTTP/2 assets to server push the critical Gatsby\nscripts (ones that have the <code class=\"language-text\">preload</code> attribute already). It will also add some\nbasic security headers. You can easily add or replace headers through the plugin\nconfig.</p>\n<h2 id=\"install\"><a href=\"#install\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p><code class=\"language-text\">npm install --save gatsby-plugin-netlify</code></p>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-netlify`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// make sure to put last in the array</span>\n<span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<h2 id=\"configuration\"><a href=\"#configuration\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuration</h2>\n<p>If you just need the critical assets, you don’t need to add any additional\nconfig. However, if you want to add headers, remove default headers, or\ntransform the given headers, you can use the following configuration options.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// make sure to put last in the array</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-plugin-netlify`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// option to add more headers. `Link` headers are transformed by the below criteria</span>\n      allPageHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// option to add headers for all pages. `Link` headers are transformed by the below criteria</span>\n      mergeSecurityHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// boolean to turn off the default security headers</span>\n      mergeLinkHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// boolean to turn off the default gatsby js headers</span>\n      mergeCachingHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// boolean to turn off the default caching headers</span>\n      transformHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> headers<span class=\"token punctuation\">,</span> <span class=\"token comment\">// optional transform for manipulating headers under each path (e.g.sorting), etc.</span>\n      generateMatchPathRewrites<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// boolean to turn off automatic creation of redirect rules for client only paths</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<h3 id=\"headers\"><a href=\"#headers\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Headers</h3>\n<p>The headers object represents a JS version of the\n<a href=\"https://www.netlify.com/docs/headers-and-basic-auth/\">Netlify <code class=\"language-text\">_headers</code> file format</a>.\nYou should pass in a object with string keys (representing the paths) and an\narray of strings for each header.</p>\n<p>An example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Basic-Auth: someuser:somepassword anotheruser:anotherpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"/my-page\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// matching headers (by type) are replaced by netlify with more specific routes</span>\n        <span class=\"token string\">\"Basic-Auth: differentuser:differentpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Link paths are specially handed by this plugin. Since most files are processed\nand cache-busted through Gatsby (with a file hash), the plugin will transform\nany base file names to the hashed variants. If the file is not hashed, it will\nensure the path is valid relative to the output <code class=\"language-text\">public</code> folder. You should be\nable to reference assets imported through javascript in the <code class=\"language-text\">static</code> folder.</p>\n<p>Do not specify the public path in the config, as the plugin will provide it for\nyou.</p>\n<p>The Netlify <code class=\"language-text\">_headers</code> file does not inherit headers, and it will replace any\nmatching headers it finds in more specific routes. For example, if you add a\nlink to the the root wildcard path (<code class=\"language-text\">/*</code>), it will be replaced by any more\nspecific path. If you want a resource to put linked across the site, you will\nhave to add to every path. To make this easier, the plugin provides the\n<code class=\"language-text\">allPageHeaders</code> option to inject the same headers on every path.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    allPageHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Link: &lt;/static/my-logo.png>; rel=preload; as=image\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Basic-Auth: someuser:somepassword anotheruser:anotherpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>You can validate the <code class=\"language-text\">_headers</code> config through the\n<a href=\"https://play.netlify.com/headers\">Netlify playground app</a>.</p>\n<h3 id=\"redirects\"><a href=\"#redirects\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Redirects</h3>\n<p>You can create redirects using the <a href=\"/docs/bound-action-creators/#createRedirect\"><code class=\"language-text\">createRedirect</code></a> action.</p>\n<p>An example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">createRedirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> fromPath<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/old-url\"</span><span class=\"token punctuation\">,</span> toPath<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/new-url\"</span><span class=\"token punctuation\">,</span> isPermanent<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">createRedirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> fromPath<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/url\"</span><span class=\"token punctuation\">,</span> toPath<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/zn-CH/url\"</span><span class=\"token punctuation\">,</span> Language<span class=\"token punctuation\">:</span> <span class=\"token string\">\"zn\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>You can also create a <code class=\"language-text\">_redirects</code> file in the <code class=\"language-text\">static</code> folder for the same effect. Any programmatically created redirects will be appended to the file.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\">\n      <pre class=\"language-sh\"><code class=\"language-sh\"># my manually set redirects\n/home              /\n/blog/my-post.php  /blog/my-post</code></pre>\n      </div>\n<p>You can validate the <code class=\"language-text\">_redirects</code> config through the\n<a href=\"https://play.netlify.com/redirects\">Netlify playground app</a>.</p>\n<p>Redirect rules are automatically added for <a href=\"/docs/building-apps-with-gatsby/#client-only-routes\">client only paths</a>. If those rules are conflicting with custom rules or if you want to have more control over them you can disable them in <a href=\"#configuration\">configuration</a> by setting <code class=\"language-text\">generateMatchPathRewrites</code> to <code class=\"language-text\">false</code>.</p>","excerpt":"gatsby-plugin-netlify Automatically generates a   file and a   file at the root of the public folder to configure\n HTTP headers  and…","timeToRead":3,"fields":{"title":"gatsby-plugin-netlify"},"parent":{"__typename":"File","relativePath":"gatsby-plugin-netlify/README.md"}},"npmPackage":{"name":"gatsby-plugin-netlify","keywords":["gatsby","gatsby-plugin","http/2-server-push","netlify"],"lastPublisher":{"name":"kylemathews","avatar":"https://gravatar.com/avatar/e567aa8adbd2d49cd9990ea1ed19d4eb"}}},"pageContext":{"slug":"/packages/gatsby-plugin-netlify/","id":"a300d094-37ce-5bc0-b791-5118bfa48084"}}